<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-VY17C4ZK69"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-VY17C4ZK69');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Preview the YDE Senior Fund Chinese Auction, browse featured prize baskets, and secure ticket bundles that power unforgettable senior experiences.">
    <meta name="keywords" content="YDE, Senior Fund, Chinese Auction, Raffle, Fundraising, Tickets">
    <meta name="author" content="Saul Setton">
    <link rel="icon" type="image/png" href="/favicon/favicon.jpeg">
    <title>YDE Senior Fund - Chinese Auction</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://js.stripe.com/v3/fingerprinted/css/elements-inner-f9037c9f803c0032ac30e9d693f1d828.css">
    <style>
        body { font-family: 'Inter', sans-serif; }
        .bebas-neue { font-family: 'Bebas Neue', sans-serif; }
        @keyframes spin {
          0% { transform: rotate(0deg); }
          100% { transform: rotate(360deg); }
        }
        .spinner { animation: spin 0.8s linear infinite; }
        body {
            background-color: #0d1222;
            background-image: linear-gradient(135deg, #0d1222 0%, #151a2d 100%);
        }
        .glass-panel {
            background: rgba(43, 49, 63, 0.4);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .hero-section {
            position: relative;
            overflow: hidden;
            background: radial-gradient(circle at top left, rgba(250, 204, 21, 0.25), transparent 55%),
                        radial-gradient(circle at bottom right, rgba(56, 189, 248, 0.22), transparent 60%),
                        linear-gradient(135deg, rgba(13, 18, 34, 0.95), rgba(15, 23, 42, 0.9));
        }
        .hero-section::before,
        .hero-section::after {
            content: '';
            position: absolute;
            border-radius: 9999px;
            filter: blur(60px);
            opacity: 0.55;
        }
        .hero-section::before {
            width: 420px;
            height: 420px;
            top: -160px;
            right: -140px;
            background: rgba(250, 204, 21, 0.35);
        }
        .hero-section::after {
            width: 360px;
            height: 360px;
            bottom: -140px;
            left: -120px;
            background: rgba(59, 130, 246, 0.35);
        }
        .hero-pill {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.35rem 1rem;
            border-radius: 9999px;
            background: rgba(15, 23, 42, 0.65);
            border: 1px solid rgba(250, 204, 21, 0.35);
            font-size: 0.75rem;
            letter-spacing: 0.12em;
            text-transform: uppercase;
        }
        .timeline-step {
            position: relative;
            padding-left: 3.25rem;
        }
        .timeline-step::before {
            content: attr(data-step);
            position: absolute;
            left: 0.6rem;
            top: 0;
            width: 2.4rem;
            height: 2.4rem;
            border-radius: 9999px;
            background: rgba(250, 204, 21, 0.18);
            border: 1px solid rgba(250, 204, 21, 0.6);
            display: grid;
            place-items: center;
            font-weight: 700;
            color: #fde047;
        }
        .timeline-step::after {
            content: '';
            position: absolute;
            left: 1.75rem;
            top: 2.6rem;
            bottom: -1.8rem;
            width: 2px;
            background: linear-gradient(to bottom, rgba(250, 204, 21, 0.45), rgba(14, 165, 233, 0.25));
        }
        .timeline-step:last-child::after {
            display: none;
        }
        .prize-card {
            position: relative;
            overflow: hidden;
            background: linear-gradient(135deg, rgba(15, 23, 42, 0.88), rgba(30, 41, 59, 0.92));
            border: 1px solid rgba(148, 163, 184, 0.14);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .prize-card::before {
            content: '';
            position: absolute;
            inset: 0;
            background: linear-gradient(160deg, rgba(250, 204, 21, 0.12), transparent 55%);
            pointer-events: none;
        }
        .prize-card:hover {
            transform: translateY(-6px);
            box-shadow: 0 15px 45px rgba(15, 23, 42, 0.45);
        }
        .faq-item {
            background: rgba(15, 23, 42, 0.78);
            border: 1px solid rgba(148, 163, 184, 0.18);
            border-radius: 1rem;
            padding: 1rem 1.25rem;
        }
        .faq-item summary {
            cursor: pointer;
            list-style: none;
            font-weight: 600;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 1rem;
        }
        .faq-item summary::-webkit-details-marker {
            display: none;
        }
        .faq-item summary::after {
            content: '\25BC';
            transition: transform 0.3s ease;
            font-size: 0.9rem;
            color: #facc15;
        }
        .faq-item[open] summary::after {
            transform: rotate(-180deg);
        }
        .faq-item p {
            margin-top: 0.75rem;
            color: #cbd5f5;
        }
        .donation-option-card {
            cursor: pointer;
            transition: all 0.2s ease-in-out;
            border: 2px solid transparent;
        }
        .donation-option-card.selected {
            background-color: rgba(251, 191, 36, 0.2);
            border-color: #FBBF24;
            box-shadow: 0 0 15px rgba(251, 191, 36, 0.5);
        }
        /* Mobile-first adjustment for header navigation (Fixed Header CSS) */
        @media (max-width: 767px) {
            #main-menu li { width: 100%; }
            #main-menu li a {
                display: block;
                text-align: center;
                padding: 0.75rem 1rem;
            }
            #main-menu li:last-child a { margin-top: 0.5rem; }
        }
    </style>
</head>
<body class="text-white min-h-screen flex flex-col">

    <!-- Global Loading Overlay -->
    <div id="globalLoadingOverlay" class="fixed inset-0 z-[100] bg-slate-900/80 backdrop-blur-sm flex flex-col items-center justify-center gap-4 hidden">
        <div class="spinner w-12 h-12 border-4 border-t-4 border-yellow-400 border-opacity-20 rounded-full"></div>
        <p id="globalSpinnerText" class="text-white text-xl font-semibold">Loading...</p>
    </div>

    <!-- Custom Popup Modal -->
    <div id="customPopupOverlay" class="fixed inset-0 z-[101] bg-black/75 flex items-center justify-center p-4 hidden">
        <div id="customPopup" class="bg-gray-800 p-8 rounded-lg shadow-2xl max-w-sm w-full text-center scale-95 transition-all duration-300">
            <h2 id="popupTitle" class="bebas-neue text-3xl font-bold text-yellow-400 mb-4"></h2>
            <p id="popupMessage" class="text-gray-300 text-lg mb-6"></p>
            <button id="popupCloseButton" class="w-full py-3 rounded-full bg-yellow-400 text-black font-bold hover:bg-yellow-500 transition-colors">OK</button>
        </div>
    </div>

    <!-- Header for navigation (Fixed Position) -->
    <header class="bg-black/40 py-4 px-4 md:px-12 fixed w-full top-0 z-50 shadow-2xl backdrop-blur-sm">
        <nav class="container mx-auto flex justify-between items-center flex-wrap md:flex-nowrap">
            <div class="flex items-center justify-between w-full md:w-auto">
                <a href="/" class="flex items-center space-x-2">
                    <img src="https://raw.githubusercontent.com/ToratYosef/ToratYosef..github.io/refs/heads/main/assets/logos.jpeg" alt="YDE Logo" class="h-14 sm:h-16 md:h-20 w-auto rounded-full ring-2 ring-yellow-400 p-1">
                </a>
                <button id="menu-toggle" class="md:hidden text-white focus:outline-none" aria-label="Toggle menu">
                    <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                </button>
            </div>
            <ul id="main-menu" class="hidden md:flex flex-col md:flex-row items-center space-y-2 md:space-y-0 md:space-x-8 text-base font-semibold w-full md:w-auto mt-4 md:mt-0">
                <li><a href="/rolex-raffle/" class="text-white hover:text-yellow-400 transition-colors duration-300 block">Rolex Raffle</a></li>
                <li><a href="/leaderboard/" class="text-white hover:text-yellow-400 transition-colors duration-300 block">Leaderboard</a></li>
                <li><a href="/chinese-auction/" class="py-2 px-4 rounded-full bg-yellow-400 text-black hover:bg-yellow-500 transition-colors duration-300 font-bold block">Chinese Auction</a></li>
                <li><a href="/donate/" class="text-white hover:text-yellow-400 transition-colors duration-300 block">Donate Now</a></li>
            </ul>
        </nav>
    </header>

    <main class="flex-grow pt-24 sm:pt-28">
        <section class="hero-section px-4 md:px-8 lg:px-16 py-16 sm:py-20 md:py-24">
            <div class="container mx-auto max-w-6xl text-center text-white relative z-10">
                <span class="hero-pill text-yellow-300/90 mx-auto mb-6">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75 11.25 15 15 9.75" />
                    </svg>
                    Chinese Auction Preview
                </span>
                <h1 class="bebas-neue text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold text-white mb-6 drop-shadow-xl">
                    YDE Chinese Auction Experience
                </h1>
                <p class="text-base sm:text-lg md:text-xl text-gray-200 max-w-3xl mx-auto">
                    We’re polishing every raffle basket, streamlining ticket bundles, and making sure checkout feels effortless. Explore the upcoming experience and help us keep the celebration unforgettable for the Class of 2026.
                </p>
                <div class="mt-10 grid gap-4 sm:grid-cols-3">
                    <div class="glass-panel border border-white/10 rounded-2xl p-5">
                        <p class="bebas-neue text-3xl text-yellow-300">50+</p>
                        <p class="text-sm text-gray-300">Curated prize baskets &amp; premium packages</p>
                    </div>
                    <div class="glass-panel border border-white/10 rounded-2xl p-5">
                        <p class="bebas-neue text-3xl text-yellow-300">100%</p>
                        <p class="text-sm text-gray-300">Of proceeds fuel senior programs &amp; trips</p>
                    </div>
                    <div class="glass-panel border border-white/10 rounded-2xl p-5">
                        <p class="bebas-neue text-3xl text-yellow-300">1 Night</p>
                        <p class="text-sm text-gray-300">To celebrate community, generosity, and big wins</p>
                    </div>
                </div>
            </div>
        </section>

        <section class="px-4 md:px-8 lg:px-16 -mt-12 md:-mt-16 relative z-10">
            <div class="container mx-auto max-w-6xl">
                <div class="glass-panel rounded-2xl shadow-2xl p-6 sm:p-10">
                    <div class="grid gap-10 lg:gap-16 lg:grid-cols-[minmax(0,1.1fr)_minmax(0,1fr)] items-start">
                        <div class="space-y-10 text-left">
                            <div class="bg-slate-900/60 border border-cyan-400/30 rounded-2xl p-5">
                                <h2 class="bebas-neue text-3xl text-yellow-300 mb-2">Test Mode Sandbox</h2>
                                <p class="text-sm sm:text-base text-gray-200">
                                    This build is still in staging. Payments are routed through Stripe’s testing environment so the team can finalize prize copy, inventory counts, and automations before launch. Nothing you enter here will be charged.
                                </p>
                                <p class="text-sm text-cyan-200/80 mt-3">
                                    Use Stripe test card <span class="font-semibold text-yellow-200">4242 4242 4242 4242</span> with any future expiry and CVC to simulate a checkout flow.
                                </p>
                            </div>

                            <div class="space-y-6">
                                <h2 class="bebas-neue text-3xl text-white">How the Chinese Auction Works</h2>
                                <div class="space-y-6">
                                    <div class="timeline-step" data-step="1">
                                        <h3 class="text-lg font-semibold text-white">Choose your ticket bundle</h3>
                                        <p class="text-gray-300 text-sm sm:text-base">Select a package that fits your goals. Every tier unlocks more entries and more chances to grab the spotlight baskets.</p>
                                    </div>
                                    <div class="timeline-step" data-step="2">
                                        <h3 class="text-lg font-semibold text-white">Assign tickets to prizes</h3>
                                        <p class="text-gray-300 text-sm sm:text-base">At launch you’ll drag and drop your tickets into the baskets you love. The system keeps a running tally so you can strategize.</p>
                                    </div>
                                    <div class="timeline-step" data-step="3">
                                        <h3 class="text-lg font-semibold text-white">Confirm secure payment</h3>
                                        <p class="text-gray-300 text-sm sm:text-base">We’re using Stripe Elements for a frictionless, mobile-friendly checkout. Cover the fees if you’d like to stretch the fundraiser further.</p>
                                    </div>
                                      <div class="timeline-step" data-step="4">
                                          <h3 class="text-lg font-semibold text-white">Celebrate on drawing night</h3>
                                          <p class="text-gray-300 text-sm sm:text-base">Winners will be revealed live, and our team will share prize pickup details so nobody misses out.</p>
                                      </div>
                                </div>
                            </div>

                            <div>
                                <h3 class="bebas-neue text-3xl text-white mb-4">Why everyone loves this night</h3>
                                <div class="grid gap-4 sm:grid-cols-2">
                                    <div class="bg-slate-900/60 border border-white/10 rounded-xl p-4">
                                        <p class="bebas-neue text-3xl text-yellow-300">$26K+</p>
                                        <p class="text-sm text-gray-300">Goal for senior trips, graduation, and milestone events</p>
                                    </div>
                                    <div class="bg-slate-900/60 border border-white/10 rounded-xl p-4">
                                        <p class="bebas-neue text-3xl text-yellow-300">100s</p>
                                        <p class="text-sm text-gray-300">Of supporters expected to participate across the community</p>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div>
                            <div id="donation-form" class="glass-panel p-6 rounded-2xl shadow-2xl border border-white/10">
                                <h2 class="bebas-neue text-3xl font-bold text-white mb-4">Choose Your Impact</h2>
                                <div id="donation-options" class="grid grid-cols-2 sm:grid-cols-3 gap-4 mb-6">
                                    <div class="donation-option-card bg-slate-700/60 p-4 rounded-xl shadow-lg hover:scale-105 transform transition-all duration-300" data-amount="101">
                                        <p class="bebas-neue text-2xl font-bold text-yellow-400">$101</p>
                                        <p class="text-xs uppercase tracking-[0.25em] text-gray-300 mt-2">Spark Supporter</p>
                                    </div>
                                    <div class="donation-option-card bg-slate-700/60 p-4 rounded-xl shadow-lg hover:scale-105 transform transition-all duration-300" data-amount="201">
                                        <p class="bebas-neue text-2xl font-bold text-yellow-400">$201</p>
                                        <p class="text-xs uppercase tracking-[0.25em] text-gray-300 mt-2">Momentum Builder</p>
                                    </div>
                                    <div class="donation-option-card bg-slate-700/60 p-4 rounded-xl shadow-lg hover:scale-105 transform transition-all duration-300" data-amount="501">
                                        <p class="bebas-neue text-2xl font-bold text-yellow-400">$501</p>
                                        <p class="text-xs uppercase tracking-[0.25em] text-gray-300 mt-2">Gold Basket Boost</p>
                                    </div>
                                    <div class="donation-option-card bg-slate-700/60 p-4 rounded-xl shadow-lg hover:scale-105 transform transition-all duration-300" data-amount="1000">
                                        <p class="bebas-neue text-2xl font-bold text-yellow-400">$1000</p>
                                        <p class="text-xs uppercase tracking-[0.25em] text-gray-300 mt-2">Platinum Patron</p>
                                    </div>
                                    <div class="donation-option-card bg-slate-700/60 p-4 rounded-xl shadow-lg hover:scale-105 transform transition-all duration-300" data-amount="1500">
                                        <p class="bebas-neue text-2xl font-bold text-yellow-400">$1500</p>
                                        <p class="text-xs uppercase tracking-[0.25em] text-gray-300 mt-2">Legacy Circle</p>
                                    </div>
                                    <div class="donation-option-card bg-slate-700/60 p-4 rounded-xl shadow-lg hover:scale-105 transform transition-all duration-300" data-amount="2000">
                                        <p class="bebas-neue text-2xl font-bold text-yellow-400">$2000</p>
                                        <p class="text-xs uppercase tracking-[0.25em] text-gray-300 mt-2">Dream Builder</p>
                                    </div>
                                    <div class="donation-option-card bg-slate-700/60 p-4 rounded-xl shadow-lg hover:scale-105 transform transition-all duration-300 col-span-full" data-amount="other">
                                        <p class="bebas-neue text-2xl font-bold text-yellow-400">Enter Other Amount</p>
                                        <p class="text-xs uppercase tracking-[0.25em] text-gray-300 mt-2">Custom Support</p>
                                    </div>
                                </div>

                                <div id="other-amount-container" class="mb-6 hidden">
                                    <label for="other-amount" class="text-sm text-gray-400 block mb-2 text-left">Please enter your amount:</label>
                                    <input type="number" id="other-amount" placeholder="Enter Amount" min="1" class="w-full py-3 px-4 rounded-lg bg-slate-600/50 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition-all duration-300">
                                </div>

                                <div class="bebas-neue text-2xl font-bold text-yellow-400 text-center mt-4">Total: $<span id="calculated-total-amount">0.00</span></div>

                                <div id="user-info-form" class="space-y-4 mt-6">
                                    <div><input type="text" id="donation-name" placeholder="Full Name" class="w-full py-3 px-4 rounded-lg bg-slate-600/50 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition-all duration-300"></div>
                                    <div><input type="email" id="donation-email" placeholder="Email Address" class="w-full py-3 px-4 rounded-lg bg-slate-600/50 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition-all duration-300"></div>
                                    <div><input type="tel" id="donation-phone" placeholder="Phone Number" class="w-full py-3 px-4 rounded-lg bg-slate-600/50 text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-yellow-400 transition-all duration-300"></div>
                                </div>

                                <div class="flex items-center justify-center gap-2 mt-4 text-gray-300">
                                    <input type="checkbox" id="cover-fees-checkbox" class="h-4 w-4 rounded-full text-yellow-400 focus:ring-yellow-400 border-gray-600 bg-gray-700">
                                    <label for="cover-fees-checkbox" class="text-sm md:text-base">I would like to cover the processing fees</label>
                                </div>

                                <button id="donation-proceed-to-payment" class="w-full py-3 mt-6 rounded-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold transition-colors duration-300 relative overflow-hidden">
                                    <span class="button-text">Proceed to Payment</span>
                                    <div class="button-spinner absolute inset-0 m-auto w-8 h-8 border-4 border-t-4 border-black border-opacity-20 rounded-full hidden"></div>
                                </button>

                                <div id="stripe-donation-payment-element" class="hidden">
                                    <div id="donation-payment-element-container"></div>
                                    <button id="stripe-donation-pay-button" class="w-full py-3 mt-4 rounded-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold transition-colors duration-300 hidden">
                                        <span class="button-text">Pay Now</span>
                                        <div class="button-spinner absolute inset-0 m-auto w-8 h-8 border-4 border-t-4 border-black border-opacity-20 rounded-full hidden"></div>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section class="px-4 md:px-8 lg:px-16 mt-16">
            <div class="container mx-auto max-w-6xl">
                <div class="flex flex-wrap items-center justify-between gap-4 mb-8">
                    <h2 class="bebas-neue text-3xl sm:text-4xl text-white">Featured Prize Boards</h2>
                    <span class="text-sm uppercase tracking-[0.3em] text-yellow-300">Sneak Peek</span>
                </div>
                <div class="grid gap-6 md:grid-cols-3">
                    <article class="prize-card rounded-2xl p-5 flex flex-col">
                        <img src="https://images.unsplash.com/photo-1502920917128-1aa500764b8a?auto=format&fit=crop&w=900&q=80" alt="Luxury travel essentials including suitcases and plane wing view" class="rounded-xl h-40 object-cover mb-4">
                        <h3 class="text-xl font-semibold text-white mb-2">Luxury Travel Escape</h3>
                        <p class="text-sm text-gray-300 flex-1">Five-star accommodations, business class upgrades, and curated excursions for the ultimate getaway.</p>
                        <div class="mt-4 flex items-center justify-between text-xs uppercase tracking-[0.3em] text-yellow-200/80">
                            <span>Tier: Elite</span>
                            <span>Value: $6,500+</span>
                        </div>
                    </article>
                    <article class="prize-card rounded-2xl p-5 flex flex-col">
                        <img src="https://images.unsplash.com/photo-1489515217757-5fd1be406fef?auto=format&fit=crop&w=900&q=80" alt="Chef preparing gourmet dishes in a professional kitchen" class="rounded-xl h-40 object-cover mb-4">
                        <h3 class="text-xl font-semibold text-white mb-2">Private Chef Experience</h3>
                        <p class="text-sm text-gray-300 flex-1">Invite a renowned chef into your home for a multi-course tasting menu paired with boutique wines.</p>
                        <div class="mt-4 flex items-center justify-between text-xs uppercase tracking-[0.3em] text-yellow-200/80">
                            <span>Tier: Signature</span>
                            <span>Value: $3,200+</span>
                        </div>
                    </article>
                    <article class="prize-card rounded-2xl p-5 flex flex-col">
                        <img src="https://images.unsplash.com/photo-1595526114035-0d45ed9d04a1?auto=format&fit=crop&w=900&q=80" alt="Cutting-edge gaming and technology devices on a desk" class="rounded-xl h-40 object-cover mb-4">
                        <h3 class="text-xl font-semibold text-white mb-2">Tech &amp; Gaming Suite</h3>
                        <p class="text-sm text-gray-300 flex-1">Next-gen console, immersive peripherals, and a productivity laptop to power every passion project.</p>
                        <div class="mt-4 flex items-center justify-between text-xs uppercase tracking-[0.3em] text-yellow-200/80">
                            <span>Tier: Spotlight</span>
                            <span>Value: $4,800+</span>
                        </div>
                    </article>
                </div>
            </div>
        </section>

        <section class="px-4 md:px-8 lg:px-16 mt-16 pb-12">
            <div class="container mx-auto max-w-5xl">
                <h2 class="bebas-neue text-3xl sm:text-4xl text-white text-center mb-8">Frequently Asked Questions</h2>
                <div class="space-y-4">
                    <details class="faq-item">
                        <summary>How do I assign my tickets to specific prizes?</summary>
                        <p>Once we launch the live site you’ll see every basket laid out in a drag-and-drop grid. Choose your bundle here, then distribute tickets into the prizes you want most—our system updates your remaining balance instantly.</p>
                    </details>
                    <details class="faq-item">
                        <summary>When will real transactions go live?</summary>
                        <p>We’re targeting a public launch shortly after QA wraps. Follow the Senior Fund WhatsApp broadcast or email list for the official go-live announcement.</p>
                    </details>
                    <details class="faq-item">
                        <summary>Will I get a receipt and confirmation?</summary>
                        <p>Yes. Stripe emails confirmations immediately, and our fundraising team follows up with allocation details plus event-night reminders so you never miss a drawing.</p>
                    </details>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-black/40 py-8 mt-auto shadow-[0_-5px_15px_rgba(0,0,0,0.5)]">
        <div class="container mx-auto px-4 text-center">
            <h3 class="bebas-neue text-3xl font-bold text-yellow-400 mb-4">Contact</h3>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8 text-gray-400 mb-8">
                <div>
                    <p class="font-bold text-white">Morris E.</p>
                    <p>+1 (848)-282-6434</p>
                </div>
                <div>
                    <p class="font-bold text-white">Daniel K.</p>
                    <p>+1 (917) 858-0904</p>
                </div>
                <div>
                    <p class="font-bold text-white">Saul S.</p>
                    <p>+1 (929)-584-5753</p>
                </div>
            </div>
            <p class="text-sm text-gray-500 mt-8">
                &copy; 2026 YDE Senior Fund. All Rights Reserved.<br/>
                Website created by <a href="https://setton-source-68177.web.app" target="_blank" class="text-yellow-400 hover:text-yellow-300 transition-colors">Saul Setton</a>
            </p>
        </div>
    </footer>

    <!-- Firebase and Stripe Scripts -->
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-firestore-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-functions-compat.js"></script>
    <script src="https://js.stripe.com/v3/"></script>

    <script>
        // --- Referrer Helper Functions (COPIED) ---
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        function updateNavLinks(refId) {
            if (!refId) return;

            // Select all links in the header navigation
            const navLinks = document.querySelectorAll('header a');

            navLinks.forEach(link => {
                const currentHref = link.getAttribute('href');
                // Check if it's an internal link and not already pointing to a full external URL
                if (currentHref && currentHref.startsWith('/') && !currentHref.includes('ref=')) {
                    const separator = currentHref.includes('?') ? '&' : '?';
                    link.setAttribute('href', `${currentHref}${separator}ref=${refId}`);
                }
            });
        }
        // --- END Referrer Helper Functions ---


        document.addEventListener('DOMContentLoaded', () => {
            // --- Referral Logic Initialization ---
            const referrerRefId = getQueryParam('ref');
            if (referrerRefId) {
                console.log('Referrer ID found:', referrerRefId);
                updateNavLinks(referrerRefId); // Update all navigation links
            }
            // --- END Referrer Logic Initialization ---

            // UI Elements
            const donationOptions = document.querySelectorAll('.donation-option-card');
            const otherAmountContainer = document.getElementById('other-amount-container');
            const otherAmountInput = document.getElementById('other-amount');
            const totalAmountDisplay = document.getElementById('calculated-total-amount');
            const donationProceedToPaymentButton = document.getElementById('donation-proceed-to-payment');
            const stripeDonationPaymentElement = document.getElementById('stripe-donation-payment-element');
            const donationPaymentElementContainer = document.getElementById('donation-payment-element-container');
            const stripeDonationPayButton = document.getElementById('stripe-donation-pay-button');
            const donationNameInput = document.getElementById('donation-name');
            const donationEmailInput = document.getElementById('donation-email');
            const donationPhoneInput = document.getElementById('donation-phone');
            const coverFeesCheckbox = document.getElementById('cover-fees-checkbox');

            // Common UI Elements
            const globalLoadingOverlay = document.getElementById('globalLoadingOverlay');
            const globalSpinnerText = document.getElementById('globalSpinnerText');
            const customPopupOverlay = document.getElementById('customPopupOverlay');
            const customPopup = document.getElementById('customPopup');
            const popupTitle = document.getElementById('popupTitle');
            const popupMessage = document.getElementById('popupMessage');
            const popupCloseButton = document.getElementById('popupCloseButton');
            const menuToggle = document.getElementById('menu-toggle');
            const mainMenu = document.getElementById('main-menu');

            // Stripe & Firebase Initialization
            const stripe = Stripe('pk_live_51JFiZnKhiMP0wjNsMlHMg2o7Eo6xaWczALlQ0eu0GVpnWel1Pgz1AbUVXUJGs2pFaavhaln5jKpHSrRhxrBppBDq00Hijyiu4V');
            let elements;
            let baseDonationAmount = 0;
            let finalDonationAmount = 0;

            const firebaseConfig = {
              apiKey: "AIzaSyAT539nr_s2OxHPTAmkxwMpaWt-FiDTgQs",
              authDomain: "yderaffle.firebaseapp.com",
              projectId: "yderaffle",
              storageBucket: "yderaffle.firebasestorage.app",
              messagingSenderId: "967768309102",
              appId: "1:967768309102:web:c89d61a747e8cb941f557f"
            };
            firebase.initializeApp(firebaseConfig);
            const functions = firebase.functions();

            // Helper Functions
            function showCustomPopup(title, message) {
              popupTitle.textContent = title;
              popupMessage.textContent = message;
              customPopupOverlay.classList.remove('hidden');
              setTimeout(() => { customPopup.classList.add('scale-100'); }, 10);
            }
            function hideCustomPopup() {
                customPopup.classList.remove('scale-100');
                setTimeout(() => { customPopupOverlay.classList.add('hidden'); }, 300);
            }
            function showGlobalLoadingOverlay(message = "Loading...") {
                globalSpinnerText.textContent = message;
                globalLoadingOverlay.classList.remove('hidden');
            }
            function hideGlobalLoadingOverlay() {
                globalLoadingOverlay.classList.add('hidden');
            }
            function updateAmountDisplay(amount) {
                totalAmountDisplay.textContent = amount.toFixed(2);
            }

            function calculateAndDisplayAmount() {
                let amount = baseDonationAmount;
                if (coverFeesCheckbox.checked) {
                    // Formula to cover fees: (amount + fixed_fee) / (1 - percentage_fee)
                    amount = (amount + 0.30) / (1 - 0.029);
                }
                finalDonationAmount = amount;
                updateAmountDisplay(finalDonationAmount);
            }

            // Event Listeners
            popupCloseButton.addEventListener('click', hideCustomPopup);
            
            // Toggle mobile menu visibility
            menuToggle.addEventListener('click', () => { 
                mainMenu.classList.toggle('hidden'); 
                document.body.classList.toggle('overflow-hidden');
            });
            document.addEventListener('click', (event) => {
                if (!mainMenu.contains(event.target) && !menuToggle.contains(event.target) && !mainMenu.classList.contains('hidden')) {
                    mainMenu.classList.add('hidden');
                    document.body.classList.remove('overflow-hidden');
                }
            });


            donationOptions.forEach(card => {
                const amount = card.dataset.amount;
                card.addEventListener('click', () => {
                    donationOptions.forEach(c => c.classList.remove('selected'));
                    card.classList.add('selected');

                    if (amount === 'other') {
                        otherAmountContainer.classList.remove('hidden');
                        otherAmountInput.focus();
                        baseDonationAmount = parseFloat(otherAmountInput.value) || 0;
                    } else {
                        otherAmountContainer.classList.add('hidden');
                        otherAmountInput.value = '';
                        baseDonationAmount = parseFloat(amount);
                    }
                    calculateAndDisplayAmount();
                });
            });
            otherAmountInput.addEventListener('input', () => {
                const amount = parseFloat(otherAmountInput.value);
                if (!isNaN(amount) && amount > 0) {
                    baseDonationAmount = amount;
                } else if (otherAmountInput.value === '') {
                    baseDonationAmount = 0;
                }
                calculateAndDisplayAmount();
            });
            coverFeesCheckbox.addEventListener('change', calculateAndDisplayAmount);

            donationProceedToPaymentButton.addEventListener('click', async () => {
                const name = donationNameInput.value.trim();
                const email = donationEmailInput.value.trim();
                const phone = donationPhoneInput.value.trim();
                
                if (!name || !email || !phone) { showCustomPopup('Missing Information', 'Please fill in all fields.'); return; }
                if (finalDonationAmount < 1) { showCustomPopup('Invalid Amount', 'Please select or enter a donation amount greater than $1.00.'); return; }
                
                showGlobalLoadingOverlay("Setting up donation...");
                
                try {
                    const createDonationPaymentIntentCallable = functions.httpsCallable('createDonationPaymentIntent');
                    const { data } = await createDonationPaymentIntentCallable({
                        amount: finalDonationAmount.toFixed(2), // Send fixed amount for calculation consistency
                        name: name,
                        email: email,
                        phone: phone,
                        referral: referrerRefId || null // Pass the referral ID if it exists
                    });
                    
                    // --- START MODIFICATION FOR DARK MODE STYLING ---
                    const appearance = {
                        theme: 'night', // Stripe's built-in dark theme
                        variables: {
                            // Customizing primary color to match the site's yellow
                            colorPrimary: '#FBBF24',
                            // Setting input background to match glass-panel style for inputs
                            colorBackground: '#1f2937', 
                            colorInputBackground: '#1f2937',
                            colorText: '#f3f4f6', // Light text
                            colorDanger: '#ef4444',
                        },
                        rules: {
                             // Apply a subtle border to the inputs to match the rest of the form
                            '.Input': {
                                'border-color': '#4b5563',
                                'box-shadow': 'none',
                            },
                        }
                    };

                    elements = stripe.elements({ 
                        clientSecret: data.clientSecret,
                        appearance: appearance
                    });
                    // --- END MODIFICATION FOR DARK MODE STYLING ---

                    const paymentElement = elements.create('payment');
                    paymentElement.mount(donationPaymentElementContainer);

                    // Toggle visibility to show Stripe form
                    document.getElementById('user-info-form').classList.add('hidden');
                    document.getElementById('donation-options').classList.add('hidden');
                    document.querySelector('#donation-form h2').textContent = "Confirm Payment";
                    document.getElementById('cover-fees-checkbox').parentElement.classList.add('hidden');
                    donationProceedToPaymentButton.classList.add('hidden');
                    
                    stripeDonationPaymentElement.classList.remove('hidden');
                    stripeDonationPayButton.classList.remove('hidden');
                    hideGlobalLoadingOverlay();

                } catch (error) {
                    console.error('Error setting up donation payment:', error);
                    showCustomPopup('Payment Error', 'Could not set up donation. Please try again.');
                    hideGlobalLoadingOverlay();
                }
            });
            stripeDonationPayButton.addEventListener('click', async (event) => {
                event.preventDefault();
                showGlobalLoadingOverlay("Processing donation...");

                // Include referral ID in the return URL
                const refParam = referrerRefId ? `&ref=${referrerRefId}` : '';

                const { error } = await stripe.confirmPayment({
                    elements,
                    confirmParams: {
                        // Pass name and amount as URL parameters to the success page
                        return_url: `${window.location.origin}/successful.html?name=${encodeURIComponent(donationNameInput.value)}&amount=${finalDonationAmount.toFixed(2)}${refParam}`,
                    }
                });

                if (error) {
                    showCustomPopup('Payment Failed', error.message);
                    console.error("Stripe confirmPayment error:", error);
                    hideGlobalLoadingOverlay();
                }
            });
            
            if (donationOptions.length > 0) {
                const defaultOption = donationOptions[0];
                defaultOption.classList.add('selected');
                baseDonationAmount = parseFloat(defaultOption.dataset.amount);
            }

            // Initial call to set the display to $0.00
            calculateAndDisplayAmount();
        });
    </script>
</body>
</html>
